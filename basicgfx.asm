
	org $BFF0
	db "NES",$1a
	db $1
	db $1
	db %00000000
	db %00000000
	db 0
	db 0,0,0,0,0,0,0


curs_x equ $40
curs_y equ curs_x+1

vblanked equ $7f


nmihandler:
	pha
	php
		inc vblanked
	plp
	pla
	lda #$02
	sta $4014

	rti
	

irqhandler:
	rti


startgame:
	sei
	cld

	ldx #$ff
	txs
	
	lda $2002
	ldx #$3F
	stx $2006
	ldx #$00
	stx $2006
copypalloop:
	lda initial_palette,x
	sta $2007
	inx
	cpx #$20
	bcc copypalloop

	lda $2002
	lda #$20
	sta $2006	
	ldx #$00
	stx $2006


	
	ldx #$02 	; Set SPR-RAM address to 0
	stx $4014
spriteload:
	lda hello,x	; Load tiles, x and y attributes
	sta $0200,x
	inx
	cpx #$24	;
	bne spriteload
	lda $2002
	lda #$20
	sta $2006
	lda #$00
	sta $2006



bkgd:
	lda backgrounddata,x
	sta $2007
	inx
	cpx #$00
	bne bkgd
bkgd2:
	lda backgrounddata+256,x
	sta $2007
	inx
	cpx #$00
	bne bkgd2
bkgd3:
	lda backgrounddata,x
	sta $2007
	inx
	cpx #$00
	bne bkgd3
bkgd4:
	lda backgrounddata+256,x
	sta $2007
	inx
	cpx #$00
	bne bkgd4
	

	lda #%00011110
	sta $2001
	lda #$88
	sta $2000




forever:
	jmp forever



initial_palette:
	db $0F,$20,$33,$1A
	db $0F,$21,$33,$1A
	db $0F,$21,$33,$1A
	db $0F,$21,$33,$1A
	db $0F,$08,$37,$21
	db $0F,$38,$16,$27
	db $0F,$21,$1A,$25
	db $0F,$21,$33,$30


hello:
	db $6c, $00, $01, $2d
	db $6c, $00, $01, $2d
	db $6c, $00, $01, $35
	db $6c, $01, $00, $3d
	db $6c, $02, $00, $45
	db $6c, $03, $00, $4d
	db $75, $04, $01, $2d
	db $75, $05, $00, $35
	db $75, $00, $01, $3d
	
backgrounddata:
	
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $01,$02,$03,$04,$05,$06,$07,$08,$09,$0A,$0B,$0C,$0D,$0E,$0F,$10,$11,$12,$13,$14,$15,$16,$17,$18,$19,$1A,$1B,$1C,$1D,$1E,$1F,$20
	db $21,$22,$23,$24,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00

	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00
	db $00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00,$00



	org $FFFA
	dw nmihandler
	dw startgame
	dw irqhandler

chr_rom_start:

background_tile_start:

	db %00000000	; Blank tile - do I need this?
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db $00, $00, $00, $00, $00, $00, $00, $00	; bitplane 2

	db %00011000	; "A"
	db %00100100
	db %01000010
	db %01000010
	db %01111110
	db %01000010
	db %01000010
	db %01000010
	db $00, $00, $00, $00, $00, $00, $00, $00	; bitplane 2

	db %11111000	; "B"
	db %10000100
	db %10000100
	db %11111000
	db %10001000
	db %10000100
	db %10000010
	db %11111100
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00111100	; "C"
	db %01000010
	db %10000000
	db %10000000
	db %10000000
	db %10000000
	db %10000010
	db %01111100
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %11100000	; "D"
	db %10010000
	db %10001100
	db %10000110
	db %10000110
	db %10001100
	db %10010000
	db %11100000
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00000000	; "E"
	db %11111111
	db %10000000
	db %10000000
	db %11111100
	db %10000000
	db %10000000
	db %11111111
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00000000	; "F"
	db %11111111
	db %10000000
	db %10000000
	db %11111100
	db %10000000
	db %10000000
	db %10000000
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00111100	; "G"
	db %01000010
	db %10000000
	db %10000000
	db %10011100
	db %10000010
	db %10000001
	db %01111110
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00000000	; "H"
	db %10000001
	db %10000001
	db %10000001
	db %11111111
	db %10000001
	db %10000001
	db %10000001
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %11111110	; "I"
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %11111110
	db $00, $00, $00, $00, $00, $00, $00, $00


	db %11111110	; "J"
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %10010000
	db %01110000
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %10000010	; "K"
	db %10000100
	db %10011000
	db %11100000
	db %11100000
	db %10011000
	db %10000100
	db %10000010
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %10000000	; "L"
	db %10000000
	db %10000000
	db %10000000
	db %10000000
	db %10000000
	db %10000000
	db %11111111
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %10000001	; "M"
	db %11000011
	db %10100101
	db %10011001
	db %10000001
	db %10000001
	db %10000001
	db %10000001
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %10000001	; "N"
	db %11000001
	db %10100001
	db %10010001
	db %10001001
	db %10000101
	db %10000011
	db %10000001
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %01111110	; "O"
	db %10000001
	db %10000001
	db %10000001
	db %10000001
	db %10000001
	db %10000001
	db %01111110
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %01111110	; "P"
	db %10000001
	db %10000001
	db %10000001
	db %11111100
	db %10000000
	db %10000000
	db %10000000
	db $00, $00, $00, $00, $00, $00, $00, $00


	db %01111100	; "Q"
	db %10000010
	db %10000001
	db %10000001
	db %10000001
	db %10000101
	db %10000010
	db %01111101
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00111100	; "R"
	db %11000010
	db %10000001
	db %10000010
	db %11111100
	db %10000100
	db %10000010
	db %10000011
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %01111110	; "S"
	db %11000001
	db %10000000
	db %01100000
	db %00001100
	db %00000010
	db %10000011
	db %01111110
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %11111110	; "T"
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db $00, $00, $00, $00, $00, $00, $00, $00


	db %10000001	; "U"
	db %10000001
	db %10000001
	db %10000001
	db %10000001
	db %10000001
	db %01000010
	db %00111100
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %10000010	; "V"
	db %10000010
	db %10000010
	db %10000010
	db %10000010
	db %01000100
	db %00101000
	db %00010000
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %10000010	; "W"
	db %10000010
	db %10000010
	db %10000010
	db %10000010
	db %10010010
	db %10101010
	db %01000100
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00000000	; "X"
	db %10000010	
	db %01000100
	db %00101000
	db %00010000
	db %00101000
	db %01000100
	db %10000010
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00000000	; "Y"
	db %10000010	
	db %01000100
	db %00101000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %11111111	; "Z"
	db %00000010	
	db %00000100
	db %00001000
	db %00010000
	db %00100000
	db %01000000
	db %11111111
	db $00, $00, $00, $00, $00, $00, $00, $00


	db %00010000	; "!"
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00000000
	db %00010000
	db %00010000
	db $00, $00, $00, $00, $00, $00, $00, $00


	db %00010000	; "1"
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db %00010000
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %01111100	; "2"
	db %10000010
	db %00000010
	db %00000100
	db %00001000
	db %00110000
	db %01000000
	db %11111111
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %01111100	; "3"
	db %10000010
	db %00000100
	db %00011000
	db %00011000
	db %00000100
	db %10000010
	db %01111100
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00000111	; "4"
	db %00001001
	db %00100001
	db %01111111
	db %00000001
	db %00000001
	db %00000001
	db %00000001
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %11111111	; "5"
	db %10000000
	db %10000000
	db %11111100
	db %00000010
	db %00000001
	db %10000001
	db %01111110
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00011100	; "6"
	db %00100000
	db %01000000
	db %01111000
	db %01000100
	db %10000010
	db %10000010
	db %01111110
	db $00, $00, $00, $00, $00, $00, $00, $00


	db %11111111	; "7"
	db %00000010
	db %00000100
	db %00001000
	db %00010000
	db %00100000
	db %01000000
	db %10000000
	db $00, $00, $00, $00, $00, $00, $00, $00

	db %00011000	; "8"
	db %00100100
	db %01000010
	db %00111000
	db %01000100
	db %10000010
	db %10000010
	db %01111110
	db $00, $00, $00, $00, $00, $00, $00, $00


	db %00011000	; "9"
	db %00100100
	db %01000010
	db %00111010
	db %00000010
	db %00000010
	db %00000010
	db %00000010
	db $00, $00, $00, $00, $00, $00, $00, $00

background_tile_end:
	ds 4096-(background_tile_end-background_tile_start)


sprite_tile_start:

	db %00000000	; "CAAAAAAAAAAAAAAKE"
	db %00011100
	db %00111110
	db %00111110
	db %00000000
	db %00000000
	db %00000000
	db %00000000

	db %00000000	; "CAAAAAAAAAAAAAAKE bitplane2"
	db %00000000
	db %00111110
	db %00111110
	db %01111110
	db %01111110
	db %01111110
	db %01111110

	db %00000000	; "Lana Person walk"
	db %00011100
	db %00010000
	db %00010000
	db %00011100
	db %00001100
	db %00001100
	db %00010010

	db %00000000	; "Lana Person walk bp2"
	db %00000000
	db %00001100
	db %00001100
	db %00001100
	db %00001100
	db %00001100
	db %00000000

	db %00000000	; "Lana Person"
	db %00011100
	db %00010000
	db %00010000
	db %00011100
	db %00001100
	db %00001100
	db %00001100

	db %00000000	; "Lana Person bp2"
	db %00000000
	db %00001100
	db %00001100
	db %00001100
	db %00000000
	db %00000000
	db %00000000

	db %00000000	; "Lana bomb"
	db %00001000
	db %00111110
	db %01111111
	db %01111111
	db %01111111
	db %00111110
	db %00011100

	db %00011000	; "Lana bomb bp2"
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000

			; BEANIE
	db %00000000
	db %00000000
	db %00000000
	db %00000000	; "CAAAAAAAAAAAAAAKE"
	db %00010000
	db %00000000
	db %01111100
	db %01111100

	db %00000000	; "CAAAAAAAAAAAAAAKE bitplane2"
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00111000
	db %01111100
	db %01111100

	db %00000000	; "Person walk"
	db %00111000
	db %00101000
	db %00000000
	db %00111000
	db %00111000
	db %00111000
	db %00000000

	db %00000000	; "Person walk bp2"
	db %00010000
	db %00010000
	db %00111000
	db %00000100
	db %00000000
	db %00000000
	db %00101000

	db %00000000	; "Lana Person"
	db %00011100
	db %00010000
	db %00010000
	db %00011100
	db %00001100
	db %00001100
	db %00001100

	db %00000000	; "Lana Person bp2"
	db %00000000
	db %00001100
	db %00001100
	db %00001100
	db %00000000
	db %00000000
	db %00000000

	db %00000000	; "Lana bomb"
	db %00001000
	db %00111110
	db %01111111
	db %01111111
	db %01111111
	db %00111110
	db %00011100

	db %00011000	; "Lana bomb bp2"
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000
	db %00000000	

	
	
sprite_tile_end

	
chr_rom_end:

; Pad chr-rom to 8k(to make valid file)
	ds 8192-(chr_rom_end-chr_rom_start)

